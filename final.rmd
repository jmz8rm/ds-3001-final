---
title: "Final project"
author: 
- "Justin Zhang"
- "Cato Zhong"
- "Aaron Lin"
date: "May 1, 2023"
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(caret)
library(rpart)
library(rpart.plot)
library(randomForest)
library(ROCR)

```
# Question:
## Background
Bike shares are a new type of bike rental that has been fully automated, from membership to rental and return. These systems allow users to easily rent bikes from one location and return them to other locations around the city.

We chose to focus on the Capital Bikeshare located in Washington, DC and look at the hourly data associated with the bikeshare.

We picked this data-set due in part due to the size, with 17,000+ rows available and a good mix of categorical and continuous data. The bikeshare data can also tell us about the traffic, environmental, and health issues in the city so it is an interesting data set to look at.

Our group wanted to know if we could accurately predict the number of bikes rented out based on a number of factors, including weather, season, time of day, and type of day (weekday, workday, holiday).

Other research published using this data set:
https://link.springer.com/article/10.1007/s13748-013-0040-3



## Exploratory analysis
```{r}

# preprocessing
bike <- read.csv("bike-hour.csv")
rownames(bike) <- bike$instant
bike <- bike %>% 
  select(-c(instant, dteday, casual, registered)) %>% 
  mutate_at(c("season", "yr", "mnth", "hr", "holiday", "weekday", "workingday", "weathersit"), as.factor)

str(bike)
view(bike)

```
## Methods
```{r}

# split data
set.seed(2023)
train_tunetest_index <- createDataPartition(bike$cnt, p=0.7, list=FALSE)
train <- bike[train_tunetest_index,]
tunetest <- bike[-train_tunetest_index,]
tune_test_index <- createDataPartition(tunetest$cnt, p=0.5, list=FALSE)
tune <- tunetest[tune_test_index,]
test <- tunetest[-tune_test_index,]

hist(train$cnt)
hist(tune$cnt)
hist(test$cnt)

```

```{r}

# training
train_x <- train %>% select(-cnt)
train_y <- train$cnt
rf <- randomForest(train_x, train_y)

```

```{r}
# evaluate/tune
```

```{r}
# tune
```
## Evaluation
## Fairness assessment
## Conclusion
## Future work